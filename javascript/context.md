# 执行上下文

## 定义

执行上下文，也称为作用域。JavaScript代码在执行上下文中运行。执行上下文中包含变量对象、表达式、作用域链、this 指向。如果这些变量和表达式在执行上下文中，那么是可以被访问的。

## 执行上下文的类型

|  作用域（Scope）   | 范围  |
|  ----  | ----  |
| window/global Scope  | 全局作用域 |
| function Scope  | 函数作用域 |
| Block Scope  | 块作用域（ES6） |

全局作用域是默认的执行环境，所有代码都被包含进去的执行环境。在浏览器中，会创建全局对象window，并将全局环境中的this指向window。全局作用域只有一个。

每次调用函数，就会创建函数的执行上下文。多个函数互相调用，会形成多个函数的执行上下文栈。函数作用域可以有任意多个，具体数量取决于函数调用的次数。

块作用域是指TODO

## 作用域链/执行栈

执行栈是一种先进后出的数据结构。

```javascript
function n1(){
	n2()
	console.log('n1')
}
function n2(){
	n3()
	console.log('n2')
}
function n3(){
	console.log('n3')
}
```

以上代码，会按照n1、n2、n3的顺序入栈。n1在栈低第二层，n3在栈顶，全局作用域在最底层。n3执行完后出栈继续执行n2，n2执行完后出栈，继续执行n1。n1执行完后也出栈。

从而作用域可以根据函数执行的顺序分层，以便子作用域可以访问父作用域，通常是指沿着链式的作用域链查找，而不能从父作用域引用子作用域中的变量和引用。

## 函数上下文的生命周期

### 创建阶段
在JavaScript代码执行前，将创建上下文，将会做如下3件事情：
1. 
### 执行阶段

## 函数声明提升、遍历提升




## 闭包


## 参考资料
1. https://developer.mozilla.org/zh-CN/docs/Glossary/Scope
2. https://juejin.cn/post/6844903682283143181
3. https://juejin.cn/post/6844903788977848334